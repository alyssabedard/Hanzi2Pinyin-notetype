<!--
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚        Hanzi2Pinyin - Anki Note Type             â”‚
â”‚                                                â”‚
â”‚               Bugs/Suggestions?                â”‚
â”‚  github.com/alyssabedard/Hanzi2Pinyin-notetype   â”‚
â”‚                                                â”‚
â”‚                    ðŸ’œ 2025                     â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
-->

<!-- Front Template -->

<!-- Sentence Card -->
<div class="sentence-card">
    {{#IsSentenceCard}}

    <div lang="zh-Hans" class="sentence-pinyin hanzi-ruby" id="sentence-toggle">
        {{furigana:SentencePinyin}}
    </div>


    <button class="btn" onclick="toggleRuby()">Toggle Pinyin</button>

    {{/IsSentenceCard}}
</div>


<!-- Audio Card -->
<div class="audio-card">
    {{^IsSentenceCard}}

    {{SentenceAudio}}

    {{/IsSentenceCard}}
</div>

<script>
    window.setTimeout(function() {
        // Get sentence container and Expression text
        let sentenceDiv = document.getElementById('sentence-toggle');
        let expressionText = "{{Expression}}".trim();

        // Process if container and expression exist
        if (sentenceDiv && expressionText) {
            let rubyChar = sentenceDiv.getElementsByTagName('ruby');

            // Highlight matching characters in Expression
            for (let i = 0; i < rubyChar.length; i++) {
                let char = rubyChar[i].firstChild.textContent;
                if (expressionText.includes(char)) {
                    rubyChar[i].style.color = '#b79cf4'; // CHANGE PURPLE COLOR HERE :)
                    rubyChar[i].style.fontWeight = 'bold';
                }
            }
        }
    }, 100);  // 100ms delay

    // Toggle ruby text display
    function toggleRuby() {
        let sentenceDiv = document.getElementById('sentence-toggle');
        sentenceDiv.classList.toggle('show-all-ruby');
    }
</script>